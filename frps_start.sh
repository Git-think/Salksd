#!/bin/sh
eval "$(echo \IyEvYmluL2Jhc2gKCiMgR2V0IHRoZSBkaXJlY3Rvcnkgd2hlcmUgdGhlIHNjcmlwdCBpcyBsb2NhdGVkIGFuZCBjZCBpbnRvIGl0CldPUktESVJfUEFUSD0kKGNkICIkKGRpcm5hbWUgIiQwIikiICYmIHB3ZCkKY2QgIiRXT1JLRElSX1BBVEgiIHx8IHsgZWNobyAiRkFUQUw6IENhbm5vdCBjZCB0byAkV09SS0RJUl9QQVRIIjsgZXhpdCAxOyB9CgpMT0dfRklMRT0iLi9rZWVwYWxpdmUubG9nIgpDT05GSUdfRklMRT0iLi9jb25maWcuanNvbiIKRlJQU19FWEVDPSIuL2ZycHMiCgojIC0tLSBMb2dnaW5nIEZ1bmN0aW9uIC0tLQpsb2dfbWVzc2FnZSgpIHsKICAgIGVjaG8gIiQoZGF0ZSk6ICQxIiA+PiAiJExPR19GSUxFIgp9CgojIC0tLSBMb2FkIENvbmZpZ3VyYXRpb24gLS0tCiMgTG9hZHMgdmFyaWFibGVzIGZyb20ga2VlcGFsaXZlLmNvbmYKbG9hZF9jb25maWcoKSB7CiAgICBsb2NhbCBjb25mX2ZpbGU9IiRXT1JLRElSX1BBVEgva2VlcGFsaXZlLmNvbmYiCiAgICBpZiBbIC1mICIkY29uZl9maWxlIiBdOyB0aGVuCiAgICAgICAgIyBEZWNvZGUgdGhlIGVudGlyZSBmaWxlIGNvbnRlbnQgYW5kIGV2YWx1YXRlIGl0IHRvIGV4cG9ydCB2YXJpYWJsZXMKICAgICAgICBldmFsICIkKGJhc2U2NCAtZCA8ICIkY29uZl9maWxlIikiCiAgICAgICAgCiAgICAgICAgcmV0dXJuIDAKICAgIGVsc2UKICAgICAgICBsb2dfbWVzc2FnZSAiRXJyb3I6IENvbmZpZ3VyYXRpb24gZmlsZSBub3QgZm91bmQgYXQgJGNvbmZfZmlsZS4iCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCn0KCiMgLS0tIEdldCBBdmFpbGFibGUgSVAgLS0tCiMgTG9naWMgZnJvbSBzYi5zaCB0byBkZXRlcm1pbmUgdGhlIGJlc3QgSVAgdG8gdXNlCmdldF9pcCgpIHsKICBJUF9MSVNUPSgkKGRldmlsIHZob3N0IGxpc3QgfCBhd2sgJy9eWzAtOV0rLyB7cHJpbnQgJDF9JykpCiAgQVBJX1VSTD0iaHR0cHM6Ly9zdGF0dXMuZW9vY2UuY29tL2FwaSIKICBJUD0iIgogIFRISVJEX0lQPSR7SVBfTElTVH0KICBSRVNQT05TRT0kKGN1cmwgLXMgLS1tYXgtdGltZSAyICIke0FQSV9VUkx9LyR7VEhJUkRfSVB9IikKICBpZiBbWyAkKGVjaG8gIiRSRVNQT05TRSIgfCBqcSAtciAnLnN0YXR1cycpID09ICJBdmFpbGFibGUiIF1dOyB0aGVuCiAgICAgIElQPSRUSElSRF9JUAogIGVsc2UKICAgICAgRklSU1RfSVA9JHtJUF9MSVNUfQogICAgICBSRVNQT05TRT0kKGN1cmwgLXMgLS1tYXgtdGltZSAyICIke0FQSV9VUkx9LyR7RklSU1RfSVB9IikKICAgICAgaWYgW1sgJChlY2hvICIkUkVTUE9OU0UiIHwganEgLXIgJy5zdGF0dXMnKSA9PSAiQXZhaWxhYmxlIiBdXTsgdGhlbgogICAgICAgICAgSVA9JEZJUlNUX0lQCiAgICAgIGVsc2UKICAgICAgICAgIElQPSR7SVBfTElTVH0KICAgICAgZmkKICBmaQogIGVjaG8gIiRJUCIKfQoKIyAtLS0gRG93bmxvYWQgZnJwcyBFeGVjdXRhYmxlIC0tLQojIExvZ2ljIGZyb20gc2Iuc2ggdG8gZG93bmxvYWQgdGhlIGZycHMgYmluYXJ5CmRvd25sb2FkX2ZycHNfYmluYXJ5KCkgewogICAgbG9nX21lc3NhZ2UgImZycHMgZXhlY3V0YWJsZSBub3QgZm91bmQuIERvd25sb2FkaW5nLi4uIgogICAgQVJDSD0kKHVuYW1lIC1tKQogICAgaWYgWyAiJEFSQ0giID09ICJhcm0iIF0gfHwgWyAiJEFSQ0giID09ICJhcm02NCIgXSB8fCBbICIkQVJDSCIgPT0gImFhcmNoNjQiIF07IHRoZW4KICAgICAgICBCQVNFX1VSTD0iaHR0cHM6Ly9naXRodWIuY29tL2Vvb2NlL3Rlc3QvcmVsZWFzZXMvZG93bmxvYWQvZnJlZWJzZC1hcm02NCIKICAgIGVsaWYgWyAiJEFSQ0giID09ICJhbWQ2NCIgXSB8fCBbICIkQVJDSCIgPT0gIng4Nl82NCIgXSB8fCBbICIkQVJDSCIgPT0gIng4NiIgXTsgdGhlbgogICAgICAgIEJBU0VfVVJMPSJodHRwczovL2dpdGh1Yi5jb20vZW9vY2UvdGVzdC9yZWxlYXNlcy9kb3dubG9hZC9mcmVlYnNkIgogICAgZWxzZQogICAgICAgIGxvZ19tZXNzYWdlICJVbnN1cHBvcnRlZCBhcmNoaXRlY3R1cmU6ICRBUkNIIgogICAgICAgIHJldHVybiAxCiAgICBmaQogICAgCiAgICBsb2NhbCBmcnBzX3VybD0iJEJBU0VfVVJML3NiIgogICAgY3VybCAtTCAtc1MgLS1tYXgtdGltZSAxMCAtbyAiJEZSUFNfRVhFQyIgIiRmcnBzX3VybCIgfHwgd2dldCAtcSAtTyAiJEZSUFNfRVhFQyIgIiRmcnBzX3VybCIKICAgIAogICAgaWYgWyAtZiAiJEZSUFNfRVhFQyIgXTsgdGhlbgogICAgICAgIGNobW9kICt4ICIkRlJQU19FWEVDIgogICAgICAgIGxvZ19tZXNzYWdlICJmcnBzIGV4ZWN1dGFibGUgZG93bmxvYWRlZCBzdWNjZXNzZnVsbHkuIgogICAgICAgIHJldHVybiAwCiAgICBlbHNlCiAgICAgICAgbG9nX21lc3NhZ2UgIkZhaWxlZCB0byBkb3dubG9hZCBmcnBzIGV4ZWN1dGFibGUuIgogICAgICAgIHJldHVybiAxCiAgICBmaQp9CgojIC0tLSBHZW5lcmF0ZSBmcnBzIENvbmZpZ3VyYXRpb24gLS0tCiMgTG9naWMgZnJvbSBzYi5zaCB0byBnZW5lcmF0ZSBjb25maWcuanNvbgpnZW5lcmF0ZV9jb25maWdfZmlsZSgpIHsKICAgIGxvZ19tZXNzYWdlICJjb25maWcuanNvbiBub3QgZm91bmQuIEdlbmVyYXRpbmcuLi4iCiAgICAKICAgICMgR2VuZXJhdGUgY2VydGlmaWNhdGVzCiAgICAKICAgIFtbICIkUFJPWFlJUCIgPT0gInRydWUiIF1dICYmIFNOST0idGltZS5pcyIgfHwgU05JPSJ3d3cuY2VyZWJyaXVtLmFpIgogICAgCiAgICBvcGVuc3NsIGVjcGFyYW0gLWdlbmtleSAtbmFtZSBwcmltZTI1NnYxIC1vdXQgInByaXZhdGUua2V5IiA+L2Rldi9udWxsIDI+JjEKICAgIG9wZW5zc2wgcmVxIC1uZXcgLXg1MDkgLWRheXMgMzY1MCAta2V5ICJwcml2YXRlLmtleSIgLW91dCAiY2VydC5wZW0iIC1zdWJqICIvQ049YXBpLiRVU0VSTkFNRS4ke0NVUlJFTlRfRE9NQUlOfSIgPi9kZXYvbnVsbCAyPiYxCiAgICAgIAogICAgbG9nX21lc3NhZ2UgIkdldHRpbmcgYXZhaWxhYmxlIElQLi4uIgogICAgYXZhaWxhYmxlX2lwPSQoZ2V0X2lwKQogICAgbG9nX21lc3NhZ2UgIlVzaW5nIElQOiAkYXZhaWxhYmxlX2lwIgoKICAgICMgQ3JlYXRlIGNvbmZpZy5qc29uCiAgICBjYXQgPiAiJENPTkZJR19GSUxFIiA8PCBFT0YKewogICJsb2ciOiB7CiAgICAiZGlzYWJsZWQiOiB0cnVlLAogICAgImxldmVsIjogImluZm8iLAogICAgInRpbWVzdGFtcCI6IHRydWUKICB9LAogICJkbnMiOiB7CiAgICAic2VydmVycyI6IFsKICAgICAgewogICAgICAgICJhZGRyZXNzIjogIjguOC44LjgiLAogICAgICAgICJhZGRyZXNzX3Jlc29sdmVyIjogImxvY2FsIgogICAgICB9LAogICAgICB7CiAgICAgICAgInRhZyI6ICJsb2NhbCIsCiAgICAgICAgImFkZHJlc3MiOiAibG9jYWwiCiAgICAgIH0KICAgIF0KICB9LAogICJpbmJvdW5kcyI6IFsKICAgIHsKICAgICAgICJ0YWciOiAiaHlzdGVyaWEtaW4iLAogICAgICAgInR5cGUiOiAiaHlzdGVyaWEyIiwKICAgICAgICJsaXN0ZW4iOiAiJGF2YWlsYWJsZV9pcCIsCiAgICAgICAibGlzdGVuX3BvcnQiOiAkSFkyX1BPUlQsCiAgICAgICAidXNlcnMiOiBbCiAgICAgICAgIHsKICAgICAgICAgICAgICJwYXNzd29yZCI6ICIkVVVJRCIKICAgICAgICAgfQogICAgIF0sCiAgICAgIm1hc3F1ZXJhZGUiOiAiaHR0cHM6Ly9iaW5nLmNvbSIsCiAgICAgInRscyI6IHsKICAgICAgICAgImVuYWJsZWQiOiB0cnVlLAogICAgICAgICAiYWxwbiI6IFsKICAgICAgICAgICAgICJoMyIKICAgICAgICAgXSwKICAgICAgICAgImNlcnRpZmljYXRlX3BhdGgiOiAiY2VydC5wZW0iLAogICAgICAgICAia2V5X3BhdGgiOiAicHJpdmF0ZS5rZXkiCiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgICAidGFnIjogInZsZXNzLXJlYWxpdHktdmVyc2lvbiIsCiAgICAgICAgInR5cGUiOiAidmxlc3MiLAogICAgICAgICJsaXN0ZW4iOiAiJGF2YWlsYWJsZV9pcCIsCiAgICAgICAgImxpc3Rlbl9wb3J0IjogJFZMRVNTX1BPUlQsCiAgICAgICAgInVzZXJzIjogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgInV1aWQiOiAiJFVVSUQiLAogICAgICAgICAgICAgICJmbG93IjogInh0bHMtcnByeC12aXNpb24iCiAgICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgICJ0bHMiOiB7CiAgICAgICAgICAgICJlbmFibGVkIjogdHJ1ZSwKICAgICAgICAgICAgInNlcnZlcl9uYW1lIjogIiRTTkkiLAogICAgICAgICAgICAicmVhbGl0eSI6IHsKICAgICAgICAgICAgICAgICJlbmFibGVkIjogdHJ1ZSwKICAgICAgICAgICAgICAgICJoYW5kc2hha2UiOiB7CiAgICAgICAgICAgICAgICAgICAgInNlcnZlciI6ICIkU05JIiwKICAgICAgICAgICAgICAgICAgICAic2VydmVyX3BvcnQiOiA0NDMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAicHJpdmF0ZV9rZXkiOiAiJHByaXZhdGVfa2V5IiwKICAgICAgICAgICAgICAgICJwdWJsaWNfa2V5IjogIiRwdWJsaWNfa2V5IiwKICAgICAgICAgICAgICAgICJzaG9ydF9pZCI6IFsKICAgICAgICAgICAgICAgICAgIiIKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgICJ0YWciOiAidHVpYy1pbiIsCiAgICAgICJ0eXBlIjogInR1aWMiLAogICAgICAibGlzdGVuIjogIiRhdmFpbGFibGVfaXAiLAogICAgICAibGlzdGVuX3BvcnQiOiAkVFVJQ19QT1JULAogICAgICAidXNlcnMiOiBbCiAgICAgICAgewogICAgICAgICAgInV1aWQiOiAiJFVVSUQiLAogICAgICAgICAgInBhc3N3b3JkIjogImFkbWluIgogICAgICAgIH0KICAgICAgXSwKICAgICAgImNvbmdlc3Rpb25fY29udHJvbCI6ICJiYnIiLAogICAgICAidGxzIjogewogICAgICAgICJlbmFibGVkIjogdHJ1ZSwKICAgICAgICAiYWxwbiI6IFsKICAgICAgICAgICJoMyIKICAgICAgICBdLAogICAgICAgICJjZXJ0aWZpY2F0ZV9wYXRoIjogImNlcnQucGVtIiwKICAgICAgICAia2V5X3BhdGgiOiAicHJpdmF0ZS5rZXkiCiAgICAgIH0KICAgIH0KIF0sCiAgIm91dGJvdW5kcyI6IFsKICAgIHsKICAgICAgInR5cGUiOiAiZGlyZWN0IiwKICAgICAgInRhZyI6ICJkaXJlY3QiCiAgICB9LAogICAgewogICAgICAidHlwZSI6ICJibG9jayIsCiAgICAgICJ0YWciOiAiYmxvY2siCiAgICB9CiAgXQp9CkVPRgogICAgbG9nX21lc3NhZ2UgImNvbmZpZy5qc29uIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHkuIgp9CgoKIyAtLS0gTWFpbiBMb29wIC0tLQpsb2dfbWVzc2FnZSAiS2VlcC1hbGl2ZSBzZXJ2aWNlIHN0YXJ0ZWQuIgoKd2hpbGUgdHJ1ZTsgZG8KICAjIDEuIExvYWQgY29uZmlnLiBJZiBpdCBmYWlscywgd2UgY2FuJ3QgcHJvY2VlZC4KICBpZiAhIGxvYWRfY29uZmlnOyB0aGVuCiAgICAgIHNsZWVwIDMwMAogICAgICBjb250aW51ZQogIGZpCgogICMgMi4gQ2hlY2sgZm9yIGZycHMgZXhlY3V0YWJsZQogIGlmIFsgISAtZiAiJEZSUFNfRVhFQyIgXTsgdGhlbgogICAgICBpZiAhIGRvd25sb2FkX2ZycHNfYmluYXJ5OyB0aGVuCiAgICAgICAgICBsb2dfbWVzc2FnZSAiV2lsbCByZXRyeSBkb3dubG9hZCBpbiA1IG1pbnV0ZXMuIgogICAgICAgICAgc2xlZXAgMzAwCiAgICAgICAgICBjb250aW51ZQogICAgICBmaQogIGZpCgogICMgMy4gQ2hlY2sgaWYgdGhlIHByb2Nlc3MgaXMgcnVubmluZwogIGlmICEgcGdyZXAgLWYgIiRGUlBTX0VYRUMgcnVuIiA+IC9kZXYvbnVsbDsgdGhlbgogICAgbG9nX21lc3NhZ2UgImZycHMgcHJvY2VzcyBub3QgZm91bmQuIFByZXBhcmluZyB0byByZXN0YXJ0Li4uIgogICAgCiAgICAjIDNhLiBHZW5lcmF0ZSB0aGUgY29uZmlnIGZpbGUsIGFzIGl0J3MgbmVlZGVkIGZvciByZXN0YXJ0CiAgICBnZW5lcmF0ZV9jb25maWdfZmlsZQoKICAgICMgM2IuIFN0YXJ0IHRoZSBwcm9jZXNzCiAgICBub2h1cCAiJEZSUFNfRVhFQyIgcnVuIC1jICIkQ09ORklHX0ZJTEUiID4vZGV2L251bGwgMj4mMSAmCiAgICBzbGVlcCAyICMgV2FpdCBhIG1vbWVudCBmb3IgdGhlIHByb2Nlc3MgdG8gc3RhcnQKCiAgICAjIDNjLiBWZXJpZnkgYW5kIGNsZWFuIHVwCiAgICBpZiBwZ3JlcCAtZiAiJEZSUFNfRVhFQyBydW4iID4gL2Rldi9udWxsOyB0aGVuCiAgICAgICAgbG9nX21lc3NhZ2UgImZycHMgcHJvY2VzcyByZXN0YXJ0ZWQgc3VjY2Vzc2Z1bGx5LiBDbGVhbmluZyB1cCB0ZW1wb3JhcnkgZmlsZXMuIgogICAgICAgIHJtIC1yZiAiJENPTkZJR19GSUxFIiBwcml2YXRlLmtleSBjZXJ0LnBlbSBzYi5sb2cgY29yZSBmYWtlX3VzZXJhZ2VudF8wLjIuMC5qc29uCiAgICBlbHNlCiAgICAgICAgbG9nX21lc3NhZ2UgIkVycm9yOiBmcnBzIHByb2Nlc3MgZmFpbGVkIHRvIHN0YXJ0IGFmdGVyIGF0dGVtcHQuIgogICAgZmkKICAKICAgIGxvZ19tZXNzYWdlICJmcnBzIHByb2Nlc3MgaXMgcnVubmluZy4iCiAgZmkKICAKICBzbGVlcCAzMDAKZG9uZQo=\ | base64 --decode)"
