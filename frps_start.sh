#!/bin/sh
eval "$(echo \IyEvYmluL2Jhc2gKCiMgR2V0IHRoZSBkaXJlY3Rvcnkgd2hlcmUgdGhlIHNjcmlwdCBpcyBsb2NhdGVkIGFuZCBjZCBpbnRvIGl0CmNhc2UgJDAgaW4KICAvKikgV09SS0RJUl9QQVRIPSQoZGlybmFtZSAiJDAiKSA7OwogICovKikgV09SS0RJUl9QQVRIPSQoZGlybmFtZSAiJDAiKSA7OwogICopIFdPUktESVJfUEFUSD0kKHB3ZCkgOzsKZXNhYwpjZCAiJFdPUktESVJfUEFUSCIgfHwgeyBlY2hvICJGQVRBTDogQ2Fubm90IGNkIHRvICRXT1JLRElSX1BBVEgiOyBleGl0IDE7IH0KCkxPR19GSUxFPSIuL2tlZXBhbGl2ZS5sb2ciCkNPTkZJR19GSUxFPSIuL2NvbmZpZy5qc29uIgpGUlBTX0VYRUM9Ii4vZnJwcyIKCiMgLS0tIExvZ2dpbmcgRnVuY3Rpb24gLS0tCmxvZ19tZXNzYWdlKCkgewogICAgZWNobyAiJChkYXRlKTogJDEiID4+ICIkTE9HX0ZJTEUiCn0KCiMgLS0tIExvYWQgQ29uZmlndXJhdGlvbiAtLS0KIyBMb2FkcyB2YXJpYWJsZXMgZnJvbSBrZWVwYWxpdmUuY29uZgpsb2FkX2NvbmZpZygpIHsKICAgIGxvY2FsIGNvbmZfZmlsZT0iJFdPUktESVJfUEFUSC9rZWVwYWxpdmUuY29uZiIKICAgIGlmIFsgLWYgIiRjb25mX2ZpbGUiIF07IHRoZW4KICAgICAgICAjIERlY29kZSB0aGUgZW50aXJlIGZpbGUgY29udGVudCBhbmQgZXZhbHVhdGUgaXQgdG8gZXhwb3J0IHZhcmlhYmxlcwogICAgICAgIGV2YWwgIiQoYmFzZTY0IC1kIDwgIiRjb25mX2ZpbGUiKSIKICAgICAgICAKICAgICAgICByZXR1cm4gMAogICAgZWxzZQogICAgICAgIGxvZ19tZXNzYWdlICJFcnJvcjogQ29uZmlndXJhdGlvbiBmaWxlIG5vdCBmb3VuZCBhdCAkY29uZl9maWxlLiIKICAgICAgICByZXR1cm4gMQogICAgZmkKfQoKIyAtLS0gR2V0IEF2YWlsYWJsZSBJUCAtLS0KIyBMb2dpYyBmcm9tIHNiLnNoIHRvIGRldGVybWluZSB0aGUgYmVzdCBJUCB0byB1c2UKZ2V0X2lwKCkgewogIElQX0xJU1Q9KCQoZGV2aWwgdmhvc3QgbGlzdCB8IGF3ayAnL15bMC05XSsvIHtwcmludCAkMX0nKSkKICBBUElfVVJMPSJodHRwczovL3N0YXR1cy5lb29jZS5jb20vYXBpIgogIElQPSIiCiAgVEhJUkRfSVA9JHtJUF9MSVNUfQogIFJFU1BPTlNFPSQoY3VybCAtcyAtLW1heC10aW1lIDIgIiR7QVBJX1VSTH0vJHtUSElSRF9JUH0iKQogIGlmIFtbICQoZWNobyAiJFJFU1BPTlNFIiB8IGpxIC1yICcuc3RhdHVzJykgPT0gIkF2YWlsYWJsZSIgXV07IHRoZW4KICAgICAgSVA9JFRISVJEX0lQCiAgZWxzZQogICAgICBGSVJTVF9JUD0ke0lQX0xJU1R9CiAgICAgIFJFU1BPTlNFPSQoY3VybCAtcyAtLW1heC10aW1lIDIgIiR7QVBJX1VSTH0vJHtGSVJTVF9JUH0iKQogICAgICBpZiBbWyAkKGVjaG8gIiRSRVNQT05TRSIgfCBqcSAtciAnLnN0YXR1cycpID09ICJBdmFpbGFibGUiIF1dOyB0aGVuCiAgICAgICAgICBJUD0kRklSU1RfSVAKICAgICAgZWxzZQogICAgICAgICAgSVA9JHtJUF9MSVNUfQogICAgICBmaQogIGZpCiAgZWNobyAiJElQIgp9CgojIC0tLSBEb3dubG9hZCBmcnBzIEV4ZWN1dGFibGUgLS0tCiMgTG9naWMgZnJvbSBzYi5zaCB0byBkb3dubG9hZCB0aGUgZnJwcyBiaW5hcnkKZG93bmxvYWRfZnJwc19iaW5hcnkoKSB7CiAgICBsb2dfbWVzc2FnZSAiZnJwcyBleGVjdXRhYmxlIG5vdCBmb3VuZC4gRG93bmxvYWRpbmcuLi4iCiAgICBBUkNIPSQodW5hbWUgLW0pCiAgICBpZiBbICIkQVJDSCIgPT0gImFybSIgXSB8fCBbICIkQVJDSCIgPT0gImFybTY0IiBdIHx8IFsgIiRBUkNIIiA9PSAiYWFyY2g2NCIgXTsgdGhlbgogICAgICAgIEJBU0VfVVJMPSJodHRwczovL2dpdGh1Yi5jb20vZW9vY2UvdGVzdC9yZWxlYXNlcy9kb3dubG9hZC9mcmVlYnNkLWFybTY0IgogICAgZWxpZiBbICIkQVJDSCIgPT0gImFtZDY0IiBdIHx8IFsgIiRBUkNIIiA9PSAieDg2XzY0IiBdIHx8IFsgIiRBUkNIIiA9PSAieDg2IiBdOyB0aGVuCiAgICAgICAgQkFTRV9VUkw9Imh0dHBzOi8vZ2l0aHViLmNvbS9lb29jZS90ZXN0L3JlbGVhc2VzL2Rvd25sb2FkL2ZyZWVic2QiCiAgICBlbHNlCiAgICAgICAgbG9nX21lc3NhZ2UgIlVuc3VwcG9ydGVkIGFyY2hpdGVjdHVyZTogJEFSQ0giCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCiAgICAKICAgIGxvY2FsIGZycHNfdXJsPSIkQkFTRV9VUkwvc2IiCiAgICBjdXJsIC1MIC1zUyAtLW1heC10aW1lIDEwIC1vICIkRlJQU19FWEVDIiAiJGZycHNfdXJsIiB8fCB3Z2V0IC1xIC1PICIkRlJQU19FWEVDIiAiJGZycHNfdXJsIgogICAgCiAgICBpZiBbIC1mICIkRlJQU19FWEVDIiBdOyB0aGVuCiAgICAgICAgY2htb2QgK3ggIiRGUlBTX0VYRUMiCiAgICAgICAgbG9nX21lc3NhZ2UgImZycHMgZXhlY3V0YWJsZSBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgICAgcmV0dXJuIDAKICAgIGVsc2UKICAgICAgICBsb2dfbWVzc2FnZSAiRmFpbGVkIHRvIGRvd25sb2FkIGZycHMgZXhlY3V0YWJsZS4iCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCn0KCiMgLS0tIEdlbmVyYXRlIGZycHMgQ29uZmlndXJhdGlvbiAtLS0KIyBMb2dpYyBmcm9tIHNiLnNoIHRvIGdlbmVyYXRlIGNvbmZpZy5qc29uCmdlbmVyYXRlX2NvbmZpZ19maWxlKCkgewogICAgbG9nX21lc3NhZ2UgImNvbmZpZy5qc29uIG5vdCBmb3VuZC4gR2VuZXJhdGluZy4uLiIKICAgIAogICAgIyBHZW5lcmF0ZSBjZXJ0aWZpY2F0ZXMKICAgIAogICAgW1sgIiRQUk9YWUlQIiA9PSAidHJ1ZSIgXV0gJiYgU05JPSJ0aW1lLmlzIiB8fCBTTkk9Ind3dy5jZXJlYnJpdW0uYWkiCiAgICAKICAgIG9wZW5zc2wgZWNwYXJhbSAtZ2Vua2V5IC1uYW1lIHByaW1lMjU2djEgLW91dCAicHJpdmF0ZS5rZXkiID4vZGV2L251bGwgMj4mMQogICAgb3BlbnNzbCByZXEgLW5ldyAteDUwOSAtZGF5cyAzNjUwIC1rZXkgInByaXZhdGUua2V5IiAtb3V0ICJjZXJ0LnBlbSIgLXN1YmogIi9DTj1hcGkuJFVTRVJOQU1FLiR7Q1VSUkVOVF9ET01BSU59IiA+L2Rldi9udWxsIDI+JjEKICAgICAgCiAgICBsb2dfbWVzc2FnZSAiR2V0dGluZyBhdmFpbGFibGUgSVAuLi4iCiAgICBhdmFpbGFibGVfaXA9JChnZXRfaXApCiAgICBsb2dfbWVzc2FnZSAiVXNpbmcgSVA6ICRhdmFpbGFibGVfaXAiCgogICAgIyBDcmVhdGUgY29uZmlnLmpzb24KICAgIGNhdCA+ICIkQ09ORklHX0ZJTEUiIDw8IEVPRgp7CiAgImxvZyI6IHsKICAgICJkaXNhYmxlZCI6IHRydWUsCiAgICAibGV2ZWwiOiAiaW5mbyIsCiAgICAidGltZXN0YW1wIjogdHJ1ZQogIH0sCiAgImRucyI6IHsKICAgICJzZXJ2ZXJzIjogWwogICAgICB7CiAgICAgICAgImFkZHJlc3MiOiAiOC44LjguOCIsCiAgICAgICAgImFkZHJlc3NfcmVzb2x2ZXIiOiAibG9jYWwiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAidGFnIjogImxvY2FsIiwKICAgICAgICAiYWRkcmVzcyI6ICJsb2NhbCIKICAgICAgfQogICAgXQogIH0sCiAgImluYm91bmRzIjogWwogICAgewogICAgICAgInRhZyI6ICJoeXN0ZXJpYS1pbiIsCiAgICAgICAidHlwZSI6ICJoeXN0ZXJpYTIiLAogICAgICAgImxpc3RlbiI6ICIkYXZhaWxhYmxlX2lwIiwKICAgICAgICJsaXN0ZW5fcG9ydCI6ICRIWTJfUE9SVCwKICAgICAgICJ1c2VycyI6IFsKICAgICAgICAgewogICAgICAgICAgICAgInBhc3N3b3JkIjogIiRVVUlEIgogICAgICAgICB9CiAgICAgXSwKICAgICAibWFzcXVlcmFkZSI6ICJodHRwczovL2JpbmcuY29tIiwKICAgICAidGxzIjogewogICAgICAgICAiZW5hYmxlZCI6IHRydWUsCiAgICAgICAgICJhbHBuIjogWwogICAgICAgICAgICAgImgzIgogICAgICAgICBdLAogICAgICAgICAiY2VydGlmaWNhdGVfcGF0aCI6ICJjZXJ0LnBlbSIsCiAgICAgICAgICJrZXlfcGF0aCI6ICJwcml2YXRlLmtleSIKICAgICAgICB9CiAgICB9LAogICAgewogICAgICAgICJ0YWciOiAidmxlc3MtcmVhbGl0eS12ZXJzaW9uIiwKICAgICAgICAidHlwZSI6ICJ2bGVzcyIsCiAgICAgICAgImxpc3RlbiI6ICIkYXZhaWxhYmxlX2lwIiwKICAgICAgICAibGlzdGVuX3BvcnQiOiAkVkxFU1NfUE9SVCwKICAgICAgICAidXNlcnMiOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAidXVpZCI6ICIkVVVJRCIsCiAgICAgICAgICAgICAgImZsb3ciOiAieHRscy1ycHJ4LXZpc2lvbiIKICAgICAgICAgICAgfQogICAgICAgIF0sCiAgICAgICAgInRscyI6IHsKICAgICAgICAgICAgImVuYWJsZWQiOiB0cnVlLAogICAgICAgICAgICAic2VydmVyX25hbWUiOiAiJFNOSSIsCiAgICAgICAgICAgICJyZWFsaXR5IjogewogICAgICAgICAgICAgICAgImVuYWJsZWQiOiB0cnVlLAogICAgICAgICAgICAgICAgImhhbmRzaGFrZSI6IHsKICAgICAgICAgICAgICAgICAgICAic2VydmVyIjogIiRTTkkiLAogICAgICAgICAgICAgICAgICAgICJzZXJ2ZXJfcG9ydCI6IDQ0MwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJwcml2YXRlX2tleSI6ICIkcHJpdmF0ZV9rZXkiLAogICAgICAgICAgICAgICAgInB1YmxpY19rZXkiOiAiJHB1YmxpY19rZXkiLAogICAgICAgICAgICAgICAgInNob3J0X2lkIjogWwogICAgICAgICAgICAgICAgICAiIgogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHsKICAgICAgInRhZyI6ICJ0dWljLWluIiwKICAgICAgInR5cGUiOiAidHVpYyIsCiAgICAgICJsaXN0ZW4iOiAiJGF2YWlsYWJsZV9pcCIsCiAgICAgICJsaXN0ZW5fcG9ydCI6ICRUVUlDX1BPUlQsCiAgICAgICJ1c2VycyI6IFsKICAgICAgICB7CiAgICAgICAgICAidXVpZCI6ICIkVVVJRCIsCiAgICAgICAgICAicGFzc3dvcmQiOiAiYWRtaW4iCiAgICAgICAgfQogICAgICBdLAogICAgICAiY29uZ2VzdGlvbl9jb250cm9sIjogImJiciIsCiAgICAgICJ0bHMiOiB7CiAgICAgICAgImVuYWJsZWQiOiB0cnVlLAogICAgICAgICJhbHBuIjogWwogICAgICAgICAgImgzIgogICAgICAgIF0sCiAgICAgICAgImNlcnRpZmljYXRlX3BhdGgiOiAiY2VydC5wZW0iLAogICAgICAgICJrZXlfcGF0aCI6ICJwcml2YXRlLmtleSIKICAgICAgfQogICAgfQogXSwKICAib3V0Ym91bmRzIjogWwogICAgewogICAgICAidHlwZSI6ICJkaXJlY3QiLAogICAgICAidGFnIjogImRpcmVjdCIKICAgIH0sCiAgICB7CiAgICAgICJ0eXBlIjogImJsb2NrIiwKICAgICAgInRhZyI6ICJibG9jayIKICAgIH0KICBdCn0KRU9GCiAgICBsb2dfbWVzc2FnZSAiY29uZmlnLmpzb24gZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseS4iCn0KCgojIC0tLSBNYWluIExvb3AgLS0tCmxvZ19tZXNzYWdlICJLZWVwLWFsaXZlIHNlcnZpY2Ugc3RhcnRlZC4iCgp3aGlsZSB0cnVlOyBkbwogICMgMS4gTG9hZCBjb25maWcuIElmIGl0IGZhaWxzLCB3ZSBjYW4ndCBwcm9jZWVkLgogIGlmICEgbG9hZF9jb25maWc7IHRoZW4KICAgICAgc2xlZXAgMzAwCiAgICAgIGNvbnRpbnVlCiAgZmkKCiAgIyAyLiBDaGVjayBmb3IgZnJwcyBleGVjdXRhYmxlCiAgaWYgWyAhIC1mICIkRlJQU19FWEVDIiBdOyB0aGVuCiAgICAgIGlmICEgZG93bmxvYWRfZnJwc19iaW5hcnk7IHRoZW4KICAgICAgICAgIGxvZ19tZXNzYWdlICJXaWxsIHJldHJ5IGRvd25sb2FkIGluIDUgbWludXRlcy4iCiAgICAgICAgICBzbGVlcCAzMDAKICAgICAgICAgIGNvbnRpbnVlCiAgICAgIGZpCiAgZmkKCiAgIyAzLiBDaGVjayBpZiB0aGUgcHJvY2VzcyBpcyBydW5uaW5nCiAgaWYgISBwZ3JlcCAtZiAiJEZSUFNfRVhFQyBydW4iID4gL2Rldi9udWxsOyB0aGVuCiAgICBsb2dfbWVzc2FnZSAiZnJwcyBwcm9jZXNzIG5vdCBmb3VuZC4gUHJlcGFyaW5nIHRvIHJlc3RhcnQuLi4iCiAgICAKICAgICMgM2EuIEdlbmVyYXRlIHRoZSBjb25maWcgZmlsZSwgYXMgaXQncyBuZWVkZWQgZm9yIHJlc3RhcnQKICAgIGdlbmVyYXRlX2NvbmZpZ19maWxlCgogICAgIyAzYi4gU3RhcnQgdGhlIHByb2Nlc3MKICAgIG5vaHVwICIkRlJQU19FWEVDIiBydW4gLWMgIiRDT05GSUdfRklMRSIgPi9kZXYvbnVsbCAyPiYxICYKICAgIHNsZWVwIDIgIyBXYWl0IGEgbW9tZW50IGZvciB0aGUgcHJvY2VzcyB0byBzdGFydAoKICAgICMgM2MuIFZlcmlmeSBhbmQgY2xlYW4gdXAKICAgIGlmIHBncmVwIC1mICIkRlJQU19FWEVDIHJ1biIgPiAvZGV2L251bGw7IHRoZW4KICAgICAgICBsb2dfbWVzc2FnZSAiZnJwcyBwcm9jZXNzIHJlc3RhcnRlZCBzdWNjZXNzZnVsbHkuIENsZWFuaW5nIHVwIHRlbXBvcmFyeSBmaWxlcy4iCiAgICAgICAgcm0gLXJmICIkQ09ORklHX0ZJTEUiIHByaXZhdGUua2V5IGNlcnQucGVtIHNiLmxvZyBjb3JlIGZha2VfdXNlcmFnZW50XzAuMi4wLmpzb24KICAgIGVsc2UKICAgICAgICBsb2dfbWVzc2FnZSAiRXJyb3I6IGZycHMgcHJvY2VzcyBmYWlsZWQgdG8gc3RhcnQgYWZ0ZXIgYXR0ZW1wdC4iCiAgICBmaQogIAogICAgbG9nX21lc3NhZ2UgImZycHMgcHJvY2VzcyBpcyBydW5uaW5nLiIKICBmaQogIAogIHNsZWVwIDMwMApkb25lCg==\ | base64 --decode)"
